SnowPay Wallet - eERC Converterモード実装仕様書
1. 概要と目的
本プロジェクトは、Avalanche C-Chain上で動作する、プライバシーを重視した送金・決済アプリケーション「SnowPay Wallet」を開発することを目的とする。

パブリックブロックチェーン上の取引は、その透明性ゆえに誰でも残高や取引履歴を追跡できる。これはプライバシーの観点から大きな課題となる。本アプリは、ユーザーが自身の取引履歴や残高を外部から秘匿しつつ、安全かつ簡単に資産の移動を行えるようにするソリューションを提供する。

具体的には、ユーザーは自身のウォレットからアプリ内のプライベートな環境に資産をデポジットし、そのプライベートな残高を利用して他のユーザーへの送金を行う。これにより、送金元と送金先のアドレスの直接的な繋がりをブロックチェーン上から断ち切る。

既存のeERC Converterモードの機能をそのまま流用し、最小限の変更でプライバシー送金アプリケーションを構築する。ユーザーはERC20トークンをプライベートバランスにデポジットし、暗号化された状態で他のユーザーに送金し、必要に応じて元のERC20トークンとして引き出すことができる。

1. ターゲットユーザー
金融プライバシーを重視する個人・法人

自身の資産状況や取引履歴を公開したくないユーザー

シンプルで直感的な操作性を求める暗号資産ユーザー

3. 既存MVP機能のマッピング
3.1. eERC Converterモードの活用
既存実装: eERC MVP のConverterモードは、ERC20トークンを暗号化された形式に変換し、プライベートな操作を可能にする。

活用方法: この機能をそのまま利用して、SnowPay Walletのコア機能を実現する。

3.2. 実装済み機能
デポジット機能: 
- 既存の`handlePrivateDeposit`関数を使用
- ERC20トークンをプライベートバランスに変換
- 暗号化された残高の生成と管理

プライベート送金機能:
- 既存の`handlePrivateTransfer`関数を使用  
- ゼロ知識証明による秘匿化された送金
- 受信者の登録状況確認機能

引き出し機能:
- 既存の`handlePrivateWithdraw`関数を使用
- プライベートバランスをERC20トークンに戻す
- 任意のアドレスへの送金が可能

プライベート残高表示:
- 既存の`decryptedBalance`表示機能を使用
- 暗号化された残高の復号化と表示
- リアルタイムバランス更新

ウォレット連携:
- 既存のWagmi/AppKit実装を使用
- MetaMask等のEVM互換ウォレット対応
- Avalanche Fuji Testnet対応

3.3. 追加が必要な機能（将来的拡張）
コンタクトリスト機能:
- 送金先アドレスの保存・管理
- ニックネーム設定
- ローカルストレージでの管理

取引履歴表示:
- プライベート送金履歴の表示
- 入出金履歴の記録
- ローカル暗号化保存

4. 技術要件（既存MVP流用）
4.1. 既存技術スタック
ブロックチェーン: Avalanche Fuji C-Chain（既存設定をそのまま使用）

スマートコントラクト:
- 既存のeERC Converterコントラクトを使用
- Circom/SnarkJS によるゼロ知識証明実装済み
- デポジット、送金、引き出し機能実装済み

フロントエンド:
- React.js + TypeScript + Vite（既存構成）
- Wagmi + AppKit によるウォレット連携
- TailwindCSS によるサイバーパンク風UI
- react-toastify による通知機能

4.2. 最小限の変更箇所
UI/UXの調整:
- アプリ名を「eERC」から「SnowPay Wallet」に変更
- Converterモードのみを表示（Standaloneモード非表示）
- ブランディング要素の調整（ロゴ、色調等）

機能の簡素化:
- モード切り替え機能の削除
- Converterモード専用のインターフェース
- 不要な説明テキストの削除

5. 実装計画
5.1. Phase 1: 基本機能（既存MVP活用）
- アプリ名とブランディングの変更
- Converterモード専用UI
- 基本的なデポジット・送金・引き出し機能

5.2. Phase 2: UX改善（将来的拡張）
- コンタクトリスト機能
- 取引履歴表示
- より直感的なUI/UX

6. 将来的な拡張案
マルチトークン対応: 複数のERC20トークンサポート

モバイル対応: レスポンシブデザインの最適化

高度な機能: バッチ送金、定期送金等